(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{"7pp9":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"i",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return m})),n.d(t,"j",(function(){return u})),n.d(t,"e",(function(){return E}));var r=n("hiaJ"),i=function(e){return{type:r.a.ADD_POST_REQUEST,data:e}},a=function(e){return{type:r.a.REMOVE_POST_REQUEST,data:e}},o=function(e){return{type:r.a.UPDATE_POST_REQUEST,data:e}},c=function(e){return{type:r.a.REPORT_REQUEST,data:e}},s=function(e){return{type:r.a.LOAD_POSTS_REQUEST,data:e}},d=function(e){return{type:r.a.ADD_COMMENT_REQUEST,data:e}},l=function(e){return{type:r.a.UPDATE_COMMENT_REQUEST,data:e}},m=function(e){return{type:r.a.REMOVE_COMMENT_REQUEST,data:e}},u=function(e){return{type:r.a.UPLOAD_IMAGES_REQUEST,data:e}},E=function(e){return{type:r.a.REMOVE_IMAGE,data:e}}},"Ivi+":function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),monthsShort:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),weekdays:"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),weekdaysShort:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),weekdaysMin:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY\ub144 MMMM D\uc77c",LLL:"YYYY\ub144 MMMM D\uc77c A h:mm",LLLL:"YYYY\ub144 MMMM D\uc77c dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY\ub144 MMMM D\uc77c",lll:"YYYY\ub144 MMMM D\uc77c A h:mm",llll:"YYYY\ub144 MMMM D\uc77c dddd A h:mm"},calendar:{sameDay:"\uc624\ub298 LT",nextDay:"\ub0b4\uc77c LT",nextWeek:"dddd LT",lastDay:"\uc5b4\uc81c LT",lastWeek:"\uc9c0\ub09c\uc8fc dddd LT",sameElse:"L"},relativeTime:{future:"%s \ud6c4",past:"%s \uc804",s:"\uba87 \ucd08",ss:"%d\ucd08",m:"1\ubd84",mm:"%d\ubd84",h:"\ud55c \uc2dc\uac04",hh:"%d\uc2dc\uac04",d:"\ud558\ub8e8",dd:"%d\uc77c",M:"\ud55c \ub2ec",MM:"%d\ub2ec",y:"\uc77c \ub144",yy:"%d\ub144"},dayOfMonthOrdinalParse:/\d{1,2}(\uc77c|\uc6d4|\uc8fc)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\uc77c";case"M":return e+"\uc6d4";case"w":case"W":return e+"\uc8fc";default:return e}},meridiemParse:/\uc624\uc804|\uc624\ud6c4/,isPM:function(e){return"\uc624\ud6c4"===e},meridiem:function(e,t,n){return e<12?"\uc624\uc804":"\uc624\ud6c4"}})}(n("wd/R"))},KEd5:function(e,t,n){var r={"./ko":"Ivi+"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="KEd5"},hiaJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={ADD_POST_REQUEST:"ADD_POST_REQUEST",ADD_POST_SUCCESS:"ADD_POST_SUCCESS",ADD_POST_ERROR:"ADD_POST_ERROR",REMOVE_POST_REQUEST:"REMOVE_POST_REQUEST",REMOVE_POST_SUCCESS:"REMOVE_POST_SUCCESS",REMOVE_POST_ERROR:"REMOVE_POST_ERROR",UPDATE_POST_REQUEST:"UPDATE_POST_REQUEST",UPDATE_POST_SUCCESS:"UPDATE_POST_SUCCESS",UPDATE_POST_ERROR:"UPDATE_POST_ERROR",LOAD_POSTS_REQUEST:"LOAD_POSTS_REQUEST",LOAD_POSTS_SUCCESS:"LOAD_POSTS_SUCCESS",LOAD_POSTS_ERROR:"LOAD_POSTS_ERROR",ADD_COMMENT_REQUEST:"ADD_COMMENT_REQUEST",ADD_COMMENT_SUCCESS:"ADD_COMMENT_SUCCESS",ADD_COMMENT_ERROR:"ADD_COMMENT_ERROR",REMOVE_COMMENT_REQUEST:"REMOVE_COMMENT_REQUEST",REMOVE_COMMENT_SUCCESS:"REMOVE_COMMENT_SUCCESS",REMOVE_COMMENT_ERROR:"REMOVE_COMMENT_ERROR",UPDATE_COMMENT_REQUEST:"UPDATE_COMMENT_REQUEST",UPDATE_COMMENT_SUCCESS:"UPDATE_COMMENT_SUCCESS",UPDATE_COMMENT_ERROR:"UPDATE_COMMENT_ERROR",UPLOAD_IMAGES_REQUEST:"UPLOAD_IMAGES_REQUEST",UPLOAD_IMAGES_SUCCESS:"UPLOAD_IMAGES_SUCCESS",UPLOAD_IMAGES_ERROR:"UPLOAD_IMAGES_ERROR",REMOVE_IMAGE:"REMOVE_IMAGE",REPORT_REQUEST:"REPORT_REQUEST",REPORT_SUCCESS:"REPORT_SUCCESS",REPORT_ERROR:"REPORT_ERROR"}},p2OE:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),i=n("q1tI"),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},o=n("6VBw"),c=function(e,t){return i.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};c.displayName="MoreOutlined";var s=i.forwardRef(c),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},l=function(e,t){return i.createElement(o.a,Object.assign({},e,{ref:t,icon:d}))};l.displayName="MessageOutlined";var m=i.forwardRef(l),u=n("7pp9"),E=n("wd/R"),O=n.n(E),_=n("Vvt1"),f=n.n(_),S=n("/MKj"),b=n("vOnD").b.div.withConfig({displayName:"styles__PostContainer",componentId:"glwfg8-0"})(["overflow:auto;height:100%;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background:rgba(0,0,0,0.4);.post-form-container{background:rgba(255,255,255,0.4);padding:1rem;margin-bottom:2rem;}.visitor-post{height:100%;display:flex;justify-content:center;align-items:center;}.header{position:relative;display:flex;justify-content:space-between;.header-left{display:flex;align-items:center;.left-profile-image{width:24px;height:24px;border-radius:50%;object-fit:cover;margin-right:8px;}.left-fake-image{width:24px;height:24px;border-radius:50%;margin-right:8px;background:rgba(0,0,0,0.5);text-align:center;}.left-nickname{font-weight:bold;}}.header-right{display:flex;align-items:center;position:relative;.right-day{font-size:0.75rem;}.right-buttons{margin-left:8px;font-size:16px;cursor:pointer;:hover{color:rgba(0,0,0,0.4);}}}}.post-body-container{position:relative;background:rgba(255,255,255,0.4);:not(:last-child){margin-bottom:1rem;}.post-body-header{border-bottom:1px solid rgba(0,0,0,0.2);padding:0.5rem;}.post-image{width:100%;object-fit:cover;}.post-text{padding:1rem 0.5rem;white-space:pre;}.post-comment-info{border-top:1px solid rgba(0,0,0,0.2);padding:0.5rem;}.post-comment-container{position:relative;margin:0.5rem 0;padding:0.5rem;background:linear-gradient( 120deg,rgba(69,104,220,0.7),rgba(176,106,179,0.7) );.comment-header{}.comment-text{margin-top:0.5rem;text-align:justify;white-space:pre;}}.post-comment-form-container{text-align:end;}}"]),M=f()((function(){return n.e(50).then(n.bind(null,"75CV"))}),{loadableGenerated:{webpack:function(){return["75CV"]},modules:["components/Modals/PostSettingModal"]}}),p=f()((function(){return n.e(34).then(n.bind(null,"XmWp"))}),{loadableGenerated:{webpack:function(){return["XmWp"]},modules:["components/Modals/PostEditModal"]}}),h=f()((function(){return n.e(47).then(n.bind(null,"/i6i"))}),{loadableGenerated:{webpack:function(){return["/i6i"]},modules:["components/Modals/CommentSettingModal"]}}),R=f()((function(){return n.e(32).then(n.bind(null,"g1Iv"))}),{loadableGenerated:{webpack:function(){return["g1Iv"]},modules:["components/Modals/CommentEditModal"]}}),j=f()((function(){return Promise.all([n.e(5),n.e(1),n.e(51)]).then(n.bind(null,"MNTT"))}),{loadableGenerated:{webpack:function(){return["MNTT"]},modules:["components/PostForm"]}}),T=f()((function(){return Promise.all([n.e(5),n.e(1),n.e(42)]).then(n.bind(null,"gwkI"))}),{loadableGenerated:{webpack:function(){return["gwkI"]},modules:["components/CommentForm"]}});function g(e){var t=e.singleCommunity,n=e.communityUser,a=Object(S.b)(),o=Object(S.c)((function(e){return e.post})),c=o.mainPosts,d=o.hasMorePost,l=o.loadPostsLoading,E=o.updateCommentDone,_=Object(i.useState)(!1),f=_[0],g=_[1],C=Object(i.useState)(!1),U=C[0],D=C[1],P=Object(i.useState)(0),x=P[0],A=P[1],v=Object(i.useState)(0),N=v[0],y=v[1],k=Object(i.useState)(!1),L=k[0],w=k[1],I=Object(i.useState)(0),Y=I[0],Q=I[1],V=Object(i.useState)(0),G=V[0],z=V[1],F=Object(i.useState)(!1),W=F[0],J=F[1],K=Object(i.useState)(0),B=K[0],H=K[1],X=Object(i.useRef)(null),q=Object(i.useCallback)((function(e){return function(){A(e),D(!0)}}),[]),Z=Object(i.useCallback)((function(e){return function(){Q(e),w(!0)}}),[]),$=Object(i.useCallback)((function(e){return function(){H(e),J((function(e){return!e}))}}),[]),ee=Object(i.useCallback)((function(){(U||L)&&(D(!1),w(!1))}),[U,L]);return Object(i.useEffect)((function(){E&&g(!1)}),[E]),Object(i.useEffect)((function(){var e=X.current;if(e)return e.addEventListener("scroll",r),function(){return e.removeEventListener("scroll",r)};function r(e){if(n&&c.length&&e.target.scrollTop>=e.target.scrollHeight-e.target.offsetHeight-300&&d&&!l){var r=c[c.length-1].id;a(Object(u.c)({communityId:t.id,postId:r}))}}}),[n,c,d,l,t,X.current]),Object(r.jsx)(b,{onClick:ee,ref:X,children:n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"post-form-container",children:Object(r.jsx)(j,{})}),c.length?Object(r.jsx)(r.Fragment,{children:c.map((function(e){return Object(r.jsxs)("div",{className:"post-body-container",children:[f&&e.id===N&&Object(r.jsx)(p,{setEditMode:g,setCurrentModifyPost:y,currentPostText:e.content,postId:e.id,communityId:t.id}),Object(r.jsxs)("div",{className:"header post-body-header",children:[Object(r.jsxs)("div",{className:"header-left",children:[Object(r.jsx)("span",{children:e.User.profilePhoto?Object(r.jsx)("img",{className:"left-profile-image",src:e.User.profilePhoto,alt:"profile image"}):Object(r.jsx)("div",{className:"left-fake-image",children:e.User.nickname[0]})}),Object(r.jsx)("div",{className:"left-nickname",children:e.User.nickname})]}),Object(r.jsxs)("div",{className:"header-right",children:[Object(r.jsx)("div",{className:"right-day",children:O()(e.createdAt).locale("ko").format("LLL")}),Object(r.jsx)("div",{className:"right-buttons",onClick:q(e.id),children:Object(r.jsx)(s,{})}),U&&e.id===x&&Object(r.jsx)(M,{setCurrentModifyPost:y,setEditMode:g,postId:e.id,communityId:t.id,postOwnerId:e.User.id,communityUserId:n.id,content:e.content})]})]}),e.Images.length?Object(r.jsx)("img",{src:e.Images[0].src.replace(/\/resize\//,"/original/"),alt:"image",className:"post-image"}):null,Object(r.jsx)("div",{className:"post-text",children:e.content}),Object(r.jsxs)("div",{className:"post-comment-info",children:[Object(r.jsxs)("div",{onClick:$(e.id),style:{cursor:"pointer"},children:[Object(r.jsx)("span",{style:{marginRight:"4px"},children:Object(r.jsx)(m,{})}),e.Comments.length?"\ub313\uae00 ".concat(e.Comments.length,"\uac1c \ubaa8\ub450\ubcf4\uae30"):"\ub313\uae00 \uc791\uc131\ud558\uae30"]}),W&&B===e.id&&Object(r.jsxs)(r.Fragment,{children:[e.Comments&&e.Comments.map((function(t){return Object(r.jsxs)("div",{className:"post-comment-container",children:[f&&t.id===G&&Object(r.jsx)(R,{setEditMode:g,setCurrentModifyComment:z,currentCommentText:t.content,postId:e.id,commentId:t.id}),Object(r.jsxs)("div",{className:"header comment-header",children:[Object(r.jsxs)("div",{className:"header-left",children:[Object(r.jsx)("span",{children:t.User.profilePhoto?Object(r.jsx)("img",{className:"left-profile-image",src:t.User.profilePhoto,alt:"profile image"}):Object(r.jsx)("div",{className:"left-fake-image",children:t.User.nickname[0]})}),Object(r.jsx)("div",{className:"left-nickname",children:t.User.nickname})]}),Object(r.jsxs)("div",{className:"header-right",children:[Object(r.jsx)("div",{className:"right-day",children:O()(t.createdAt).locale("ko").format("LLL")}),Object(r.jsx)("div",{className:"right-buttons",onClick:Z(t.id),children:Object(r.jsx)(s,{})})]}),L&&t.id===Y&&Object(r.jsx)(h,{setCurrentModifyComment:z,setEditMode:g,postId:e.id,commentId:t.id,commentOwnerId:t.User.id,communityUserId:n.id,content:t.content})]}),Object(r.jsx)("div",{className:"comment-text",children:t.content})]},t.id)})),Object(r.jsx)("div",{className:"post-comment-form-container",children:Object(r.jsx)(T,{postId:e.id})})]})]})]},e.id)}))}):null]}):Object(r.jsx)("div",{className:"visitor-post",children:"\ucee4\ubba4\ub2c8\ud2f0\uc720\uc800\ub9cc \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4"})})}t.default=Object(i.memo)(g)}}]);