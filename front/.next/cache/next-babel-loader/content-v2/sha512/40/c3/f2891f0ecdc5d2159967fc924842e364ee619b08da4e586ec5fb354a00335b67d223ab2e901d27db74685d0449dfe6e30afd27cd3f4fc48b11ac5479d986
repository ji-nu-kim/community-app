{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport AppLayout from '../components/Layouts/AppLayout';\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport Router from 'next/router';\nimport dynamic from 'next/dynamic';\nimport React, { memo, useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeCountryRequestAction } from 'actions/actionUser';\nimport { UserOutlined } from '@ant-design/icons';\nimport ProfileLayout, { ProfileContent, ProfileHeader } from 'components/Layouts/ProfileLayout';\nimport RoundStyleCard from 'components/Cards/RoundStyleCard';\nvar UserProfileModifyModal = dynamic(function () {\n  return import('components/Modals/UserProfileModifyModal');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/Modals/UserProfileModifyModal')];\n    },\n    modules: ['components/Modals/UserProfileModifyModal']\n  }\n});\nvar SearchAddressModal = dynamic(function () {\n  return import('components/Modals/SearchAddressModal');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/Modals/SearchAddressModal')];\n    },\n    modules: ['components/Modals/SearchAddressModal']\n  }\n});\n\nfunction Profile() {\n  var _me$Categories, _me$Communities;\n\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me,\n      changeProfileDone = _useSelector.changeProfileDone;\n\n  var _useState = useState(false),\n      userProfileModifyModal = _useState[0],\n      setUserProfileModifyModal = _useState[1];\n\n  var _useState2 = useState(false),\n      showSearchAddressModal = _useState2[0],\n      setShowSearchAdressModal = _useState2[1];\n\n  var _useState3 = useState(''),\n      modifyCountry = _useState3[0],\n      setModifyCountry = _useState3[1];\n\n  var openSearchAddressModal = useCallback(function () {\n    setShowSearchAdressModal(true);\n  }, []);\n  var closeSearchAddressModal = useCallback(function () {\n    setShowSearchAdressModal(false);\n    setModifyCountry('');\n  }, []);\n  var profileModifyModalTrigger = useCallback(function () {\n    setUserProfileModifyModal(function (prev) {\n      return !prev;\n    });\n  }, []);\n  useEffect(function () {\n    if (changeProfileDone) {\n      setUserProfileModifyModal(false);\n    }\n  }, [changeProfileDone]);\n  useEffect(function () {\n    if (modifyCountry !== '') {\n      if (confirm(\"\\uC8FC\\uC18C\\uB97C \".concat(modifyCountry, \"\\uB85C \\uBCC0\\uACBD\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"))) {\n        dispatch(changeCountryRequestAction({\n          country: modifyCountry\n        }));\n      } else {\n        alert('취소했습니다');\n      }\n    }\n  }, [modifyCountry]);\n  useEffect(function () {\n    if (!me) {\n      Router.push('/');\n    }\n  }, [me]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"\\uD504\\uB85C\\uD544 - community\"\n      })\n    }), /*#__PURE__*/_jsxs(AppLayout, {\n      children: [/*#__PURE__*/_jsxs(ProfileLayout, {\n        children: [/*#__PURE__*/_jsxs(ProfileHeader, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"header-left\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"header-image\",\n              children: me !== null && me !== void 0 && me.profilePhoto ? /*#__PURE__*/_jsx(\"img\", {\n                src: me === null || me === void 0 ? void 0 : me.profilePhoto,\n                width: \"150\",\n                height: \"150\",\n                alt: \"profile-image\"\n              }) : /*#__PURE__*/_jsx(UserOutlined, {\n                className: \"header-icon\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"header-text\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                children: \"\\uD504\\uB85C\\uD544\"\n              }), /*#__PURE__*/_jsx(\"h1\", {\n                children: me === null || me === void 0 ? void 0 : me.nickname\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"text-country\",\n                onClick: openSearchAddressModal,\n                children: me === null || me === void 0 ? void 0 : me.country\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"header-right\",\n            children: /*#__PURE__*/_jsx(\"button\", {\n              onClick: profileModifyModalTrigger,\n              children: \"\\uC218\\uC815\\uD558\\uAE30\"\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(ProfileContent, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              children: \"\\uB098\\uC758 \\uCE74\\uD14C\\uACE0\\uB9AC \\uB9AC\\uC2A4\\uD2B8\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"cards-container\",\n              children: me === null || me === void 0 ? void 0 : (_me$Categories = me.Categories) === null || _me$Categories === void 0 ? void 0 : _me$Categories.map(function (category) {\n                return /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"/category/\".concat(category.id),\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: /*#__PURE__*/_jsx(RoundStyleCard, {\n                        name: category.name,\n                        img: \"\".concat(process.env.NEXT_PUBLIC_BACK_URL_KEY, \"/\").concat(category.profilePhoto),\n                        width: \"240\",\n                        height: \"220\"\n                      })\n                    })\n                  })\n                }, category.name);\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              children: \"\\uB098\\uC758 \\uCEE4\\uBBA4\\uB2C8\\uD2F0 \\uB9AC\\uC2A4\\uD2B8\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"cards-container\",\n              children: me === null || me === void 0 ? void 0 : (_me$Communities = me.Communities) === null || _me$Communities === void 0 ? void 0 : _me$Communities.map(function (community) {\n                return /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(Link, {\n                    href: \"/community/\".concat(community.id),\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: /*#__PURE__*/_jsx(RoundStyleCard, {\n                        name: community.communityName,\n                        img: community.profilePhoto ? community.profilePhoto : null,\n                        width: \"240\",\n                        height: \"220\"\n                      })\n                    })\n                  })\n                }, community.communityName);\n              })\n            })]\n          })]\n        })]\n      }), userProfileModifyModal && /*#__PURE__*/_jsx(UserProfileModifyModal, {\n        setUserProfileModifyModal: setUserProfileModifyModal\n      }), showSearchAddressModal && /*#__PURE__*/_jsx(SearchAddressModal, {\n        closeSearchAddressModal: closeSearchAddressModal,\n        setCountry: setModifyCountry,\n        type: \"village\"\n      })]\n    })]\n  });\n}\n\nexport var __N_SSP = true;\nexport default /*#__PURE__*/memo(Profile);","map":{"version":3,"sources":["C:/Users/wlsdn/Desktop/next/community/front/pages/profile.tsx"],"names":["AppLayout","Link","Head","Router","dynamic","React","memo","useCallback","useEffect","useState","useDispatch","useSelector","changeCountryRequestAction","UserOutlined","ProfileLayout","ProfileContent","ProfileHeader","RoundStyleCard","UserProfileModifyModal","SearchAddressModal","Profile","dispatch","state","user","me","changeProfileDone","userProfileModifyModal","setUserProfileModifyModal","showSearchAddressModal","setShowSearchAdressModal","modifyCountry","setModifyCountry","openSearchAddressModal","closeSearchAddressModal","profileModifyModalTrigger","prev","confirm","country","alert","push","profilePhoto","nickname","Categories","map","category","id","name","process","env","NEXT_PUBLIC_BACK_URL_KEY","Communities","community","communityName"],"mappings":"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","sourcesContent":["import AppLayout from '../components/Layouts/AppLayout';\nimport { RootStateInterface } from '../interfaces/RootState';\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport Router from 'next/router';\nimport dynamic from 'next/dynamic';\nimport React, { memo, useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeCountryRequestAction, loadMyInfoRequestAction } from 'actions/actionUser';\nimport { GetServerSideProps } from 'next';\nimport wrapper from 'store/configureStore';\nimport axios from 'axios';\nimport { END } from '@redux-saga/core';\nimport { UserOutlined } from '@ant-design/icons';\nimport ProfileLayout, {\n  ProfileContent,\n  ProfileHeader,\n} from 'components/Layouts/ProfileLayout';\nimport { loadCategoriesRequestAction } from 'actions/actionCommunity';\nimport RoundStyleCard from 'components/Cards/RoundStyleCard';\n\nconst UserProfileModifyModal = dynamic(\n  () => import('components/Modals/UserProfileModifyModal')\n);\nconst SearchAddressModal = dynamic(() => import('components/Modals/SearchAddressModal'));\n\nfunction Profile() {\n  const dispatch = useDispatch();\n  const { me, changeProfileDone } = useSelector(\n    (state: RootStateInterface) => state.user\n  );\n  const [userProfileModifyModal, setUserProfileModifyModal] = useState(false);\n  const [showSearchAddressModal, setShowSearchAdressModal] = useState(false);\n  const [modifyCountry, setModifyCountry] = useState('');\n\n  const openSearchAddressModal = useCallback(() => {\n    setShowSearchAdressModal(true);\n  }, []);\n\n  const closeSearchAddressModal = useCallback(() => {\n    setShowSearchAdressModal(false);\n    setModifyCountry('');\n  }, []);\n\n  const profileModifyModalTrigger = useCallback(() => {\n    setUserProfileModifyModal(prev => !prev);\n  }, []);\n\n  useEffect(() => {\n    if (changeProfileDone) {\n      setUserProfileModifyModal(false);\n    }\n  }, [changeProfileDone]);\n\n  useEffect(() => {\n    if (modifyCountry !== '') {\n      if (confirm(`주소를 ${modifyCountry}로 변경하시겠습니까?`)) {\n        dispatch(changeCountryRequestAction({ country: modifyCountry }));\n      } else {\n        alert('취소했습니다');\n      }\n    }\n  }, [modifyCountry]);\n\n  useEffect(() => {\n    if (!me) {\n      Router.push('/');\n    }\n  }, [me]);\n\n  return (\n    <>\n      <Head>\n        <title>프로필 - community</title>\n      </Head>\n      <AppLayout>\n        <ProfileLayout>\n          <ProfileHeader>\n            <div className=\"header-left\">\n              <div className=\"header-image\">\n                {me?.profilePhoto ? (\n                  <img\n                    src={me?.profilePhoto}\n                    width=\"150\"\n                    height=\"150\"\n                    alt=\"profile-image\"\n                  />\n                ) : (\n                  <UserOutlined className=\"header-icon\" />\n                )}\n              </div>\n              <div className=\"header-text\">\n                <p>프로필</p>\n                <h1>{me?.nickname}</h1>\n                <p className=\"text-country\" onClick={openSearchAddressModal}>\n                  {me?.country}\n                </p>\n              </div>\n            </div>\n            <div className=\"header-right\">\n              <button onClick={profileModifyModalTrigger}>수정하기</button>\n            </div>\n          </ProfileHeader>\n          <ProfileContent>\n            <div>\n              <h1>나의 카테고리 리스트</h1>\n              <div className=\"cards-container\">\n                {me?.Categories?.map(category => (\n                  <div key={category.name}>\n                    <Link href={`/category/${category.id}`}>\n                      <a>\n                        <RoundStyleCard\n                          name={category.name}\n                          img={`${process.env.NEXT_PUBLIC_BACK_URL_KEY}/${category.profilePhoto}`}\n                          width=\"240\"\n                          height=\"220\"\n                        />\n                      </a>\n                    </Link>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div>\n              <h1>나의 커뮤니티 리스트</h1>\n              <div className=\"cards-container\">\n                {me?.Communities?.map(community => (\n                  <div key={community.communityName}>\n                    <Link href={`/community/${community.id}`}>\n                      <a>\n                        <RoundStyleCard\n                          name={community.communityName}\n                          img={community.profilePhoto ? community.profilePhoto : null}\n                          width=\"240\"\n                          height=\"220\"\n                        />\n                      </a>\n                    </Link>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </ProfileContent>\n        </ProfileLayout>\n\n        {userProfileModifyModal && (\n          <UserProfileModifyModal setUserProfileModifyModal={setUserProfileModifyModal} />\n        )}\n        {showSearchAddressModal && (\n          <SearchAddressModal\n            closeSearchAddressModal={closeSearchAddressModal}\n            setCountry={setModifyCountry}\n            type=\"village\"\n          />\n        )}\n      </AppLayout>\n    </>\n  );\n}\n\nexport const getServerSideProps: GetServerSideProps = wrapper.getServerSideProps(\n  async context => {\n    const cookie = context.req ? context.req.headers.cookie : '';\n    axios.defaults.headers.Cookie = '';\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch(loadMyInfoRequestAction());\n    context.store.dispatch(loadCategoriesRequestAction());\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  }\n);\n\nexport default memo(Profile);\n"]},"metadata":{},"sourceType":"module"}