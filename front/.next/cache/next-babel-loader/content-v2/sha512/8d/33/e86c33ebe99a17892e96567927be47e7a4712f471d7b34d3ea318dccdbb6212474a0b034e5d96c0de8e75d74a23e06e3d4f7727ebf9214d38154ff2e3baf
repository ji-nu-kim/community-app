{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"C:/Users/wlsdn/Desktop/next/community/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { PlusOutlined } from '@ant-design/icons';\nimport React, { memo, useCallback, useState } from 'react';\nimport { MakeMeetButton, MeetContainer, CardContainer } from './styles';\nimport CreateMeetModal from 'components/Modals/CreateMeetModal';\nimport ModifyMeetModal from 'components/Modals/ModifyMeetModal';\nimport Map from 'components/Map';\nimport { joinMeetRequestAction, leaveMeetRequestAction, removeMeetRequestAction } from 'actions/actionCommunity';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useEffect } from 'react';\n\nfunction Meet(_ref) {\n  var singleCommunity = _ref.singleCommunity,\n      communityUser = _ref.communityUser,\n      me = _ref.me;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.community;\n  }),\n      addMeetDone = _useSelector.addMeetDone,\n      joinMeetDone = _useSelector.joinMeetDone,\n      joinMeetError = _useSelector.joinMeetError;\n\n  var _useState = useState(false),\n      showCreateMeetModal = _useState[0],\n      setShowCreateMeetModal = _useState[1];\n\n  var _useState2 = useState(false),\n      showModifyMeetModal = _useState2[0],\n      setShowModifyMeetModal = _useState2[1];\n\n  var _useState3 = useState([]),\n      currentMeet = _useState3[0],\n      setCurrentMeet = _useState3[1];\n\n  var _useState4 = useState(-9999),\n      currentModifyMeet = _useState4[0],\n      setCurrentModifyMeet = _useState4[1];\n\n  var joinedMeetIndex = me === null || me === void 0 ? void 0 : me.Meets.map(function (meet) {\n    return meet.id;\n  });\n  var joinedMeetList = singleCommunity.Meets.filter(function (meet) {\n    return joinedMeetIndex === null || joinedMeetIndex === void 0 ? void 0 : joinedMeetIndex.includes(meet.id);\n  });\n  var notJoinedMeetList = singleCommunity.Meets.filter(function (meet) {\n    return !(joinedMeetIndex !== null && joinedMeetIndex !== void 0 && joinedMeetIndex.includes(meet.id));\n  });\n  var onClickPlace = useCallback(function (meetId) {\n    return function () {\n      if (currentMeet.includes(meetId)) {\n        return;\n      }\n\n      setCurrentMeet([].concat(_toConsumableArray(currentMeet), [meetId]));\n    };\n  }, [currentMeet]);\n  var onClickMember = useCallback(function (meetId) {\n    return function () {\n      setCurrentMeet(_toConsumableArray(currentMeet).filter(function (current) {\n        return current !== meetId;\n      }));\n    };\n  }, [currentMeet]);\n  var onClickCreateMeetButton = useCallback(function () {\n    setShowCreateMeetModal(true);\n  }, []);\n  var onClickDeleteMeetButton = useCallback(function (meetId) {\n    return function () {\n      if (confirm('모임을 삭제하시겠습니까?')) {\n        return dispatch(removeMeetRequestAction({\n          meetId: meetId,\n          communityId: singleCommunity.id\n        }));\n      }\n    };\n  }, [singleCommunity]);\n  var onClickJoinMeetButton = useCallback(function (meetId, currentMembers, totalMembers) {\n    return function () {\n      if (currentMembers >= totalMembers) {\n        return alert('인원 수가 초과되었습니다');\n      }\n\n      if (confirm('모임에 참가하시겠습니까?')) {\n        return dispatch(joinMeetRequestAction({\n          meetId: meetId,\n          communityId: singleCommunity.id\n        }));\n      }\n    };\n  }, [singleCommunity]);\n  var onClickLeaveMeetButton = useCallback(function (meetId) {\n    return function () {\n      if (confirm('모임을 탈퇴하시겠습니까?')) {\n        return dispatch(leaveMeetRequestAction({\n          communityId: singleCommunity.id,\n          meetId: meetId\n        }));\n      }\n    };\n  }, [singleCommunity]);\n  var onClickModifyMeetButton = useCallback(function (meetId) {\n    return function () {\n      setCurrentModifyMeet(meetId);\n      setShowModifyMeetModal(true);\n    };\n  }, []);\n  useEffect(function () {\n    if (addMeetDone) {\n      setShowCreateMeetModal(false);\n    }\n  }, [addMeetDone]);\n  useEffect(function () {\n    if (joinMeetDone) {\n      setShowModifyMeetModal(false);\n    }\n  }, [joinMeetDone]);\n  useEffect(function () {\n    if (joinMeetError) {\n      alert(joinMeetError);\n    }\n  }, [joinMeetError]);\n  return /*#__PURE__*/_jsx(MeetContainer, {\n    children: communityUser ? /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          overflow: 'auto'\n        },\n        children: [joinedMeetList.length ? /*#__PURE__*/_jsxs(\"div\", {\n          className: \"joined-meet\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"meet-name\",\n            children: \"\\uCC38\\uAC00\\uD55C \\uBAA8\\uC784\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"meet-card-grid\",\n            children: joinedMeetList.map(function (meet, i) {\n              return /*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsxs(CardContainer, {\n                  number: i,\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"card-left\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"card-header\",\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        className: \"meet-title\",\n                        children: meet.title\n                      })\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"card-body\",\n                      children: [/*#__PURE__*/_jsxs(\"div\", {\n                        className: \"meet-date\",\n                        children: [meet.date, \"\\uC2DC\"]\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"meet-fee\",\n                        children: [\"\\uCC38\\uAC00\\uBE44: \", meet.fee, \"\\uC6D0\"]\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"meet-members\",\n                        onClick: onClickMember(meet.id),\n                        children: [\"\\uC778\\uC6D0: \", meet.Users.length, \" / \", meet.members, \"\\uBA85\"]\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"meet-place\",\n                        onClick: onClickPlace(meet.id),\n                        children: [\"\\uC7A5\\uC18C: \", meet.place]\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: \"meet-owner\",\n                        children: [\"\\uBAA8\\uC784\\uB9AC\\uB354:\", ' ', meet.Users.map(function (user) {\n                          return user.id === meet.MeetOwnerId && user.nickname;\n                        })]\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"meet-button\",\n                        children: meet.MeetOwnerId === (me === null || me === void 0 ? void 0 : me.id) ? /*#__PURE__*/_jsxs(\"div\", {\n                          className: \"owner-buttons\",\n                          children: [/*#__PURE__*/_jsx(\"button\", {\n                            onClick: onClickModifyMeetButton(meet.id),\n                            children: \"\\uC218\\uC815\"\n                          }), /*#__PURE__*/_jsx(\"button\", {\n                            onClick: onClickDeleteMeetButton(meet.id),\n                            children: \"\\uC0AD\\uC81C\"\n                          })]\n                        }) : /*#__PURE__*/_jsx(\"button\", {\n                          onClick: onClickLeaveMeetButton(meet.id),\n                          children: \"\\uD0C8\\uD1F4\"\n                        })\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"card-right\",\n                    children: currentMeet.includes(meet.id) ? /*#__PURE__*/_jsx(Map, {\n                      address: meet.place,\n                      number: meet.id\n                    }, meet.id) : /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"show-members\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        children: \"\\uCC38\\uAC00\\uBA64\\uBC84\"\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"member-container\",\n                        children: meet.Users.map(function (user) {\n                          return /*#__PURE__*/_jsx(\"p\", {\n                            children: user.nickname\n                          }, user.id);\n                        })\n                      })]\n                    })\n                  })]\n                })\n              }, meet.id);\n            })\n          })]\n        }) : null, /*#__PURE__*/_jsxs(\"div\", {\n          className: \"new-meet\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"meet-name\",\n            children: \"\\uC0C8\\uB85C\\uC6B4 \\uBAA8\\uC784\"\n          }), notJoinedMeetList.length ? notJoinedMeetList.map(function (meet, i) {\n            return /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsxs(CardContainer, {\n                number: i,\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"card-left\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"card-header\",\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"meet-title\",\n                      children: meet.title\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"card-body\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: \"meet-date\",\n                      children: [meet.date, \"\\uC2DC\"]\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"meet-fee\",\n                      children: [\"\\uCC38\\uAC00\\uBE44: \", meet.fee, \"\\uC6D0\"]\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"meet-members\",\n                      onClick: onClickMember(meet.id),\n                      children: [\"\\uC778\\uC6D0: \", meet.Users.length, \" / \", meet.members, \"\\uBA85\"]\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"meet-place\",\n                      onClick: onClickPlace(meet.id),\n                      children: [\"\\uC7A5\\uC18C: \", meet.place]\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"meet-owner\",\n                      children: [\"\\uBAA8\\uC784\\uB9AC\\uB354:\", ' ', meet.Users.map(function (user) {\n                        return user.id === meet.MeetOwnerId && user.nickname;\n                      })]\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"meet-button\",\n                      children: meet.Users.length < meet.members ? /*#__PURE__*/_jsx(\"button\", {\n                        onClick: onClickJoinMeetButton(meet.id, meet.Users.length, meet.members),\n                        children: \"\\uCC38\\uAC00\\uD558\\uAE30\"\n                      }) : /*#__PURE__*/_jsx(\"button\", {\n                        children: \"\\uC778\\uC6D0\\uC81C\\uD55C\"\n                      })\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"card-right\",\n                  children: currentMeet.includes(meet.id) ? /*#__PURE__*/_jsx(Map, {\n                    address: meet.place,\n                    number: meet.id\n                  }, meet.id) : /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"show-members\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      children: \"\\uCC38\\uAC00\\uBA64\\uBC84\"\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"member-container\",\n                      children: meet.Users.map(function (user) {\n                        return /*#__PURE__*/_jsx(\"p\", {\n                          children: user.nickname\n                        }, user.id);\n                      })\n                    })]\n                  })\n                })]\n              })\n            }, meet.id);\n          }) : null]\n        })]\n      }), /*#__PURE__*/_jsx(MakeMeetButton, {\n        onClick: onClickCreateMeetButton,\n        children: /*#__PURE__*/_jsx(PlusOutlined, {})\n      }), showCreateMeetModal && /*#__PURE__*/_jsx(CreateMeetModal, {\n        setShowCreateMeetModal: setShowCreateMeetModal,\n        communityId: singleCommunity.id\n      }), showModifyMeetModal && /*#__PURE__*/_jsx(ModifyMeetModal, {\n        setShowModifyMeetModal: setShowModifyMeetModal,\n        communityId: singleCommunity.id,\n        meetInfo: joinedMeetList.find(function (meet) {\n          return meet.id === currentModifyMeet;\n        })\n      })]\n    }) : /*#__PURE__*/_jsx(\"div\", {\n      className: \"visitor-post\",\n      children: \"\\uCEE4\\uBBA4\\uB2C8\\uD2F0 \\uC720\\uC800\\uB9CC \\uBCFC \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\"\n    })\n  });\n}\n\nexport default /*#__PURE__*/memo(Meet);","map":{"version":3,"sources":["C:/Users/wlsdn/Desktop/next/community/front/components/CommunityBody/Meet/index.tsx"],"names":["PlusOutlined","React","memo","useCallback","useState","MakeMeetButton","MeetContainer","CardContainer","CreateMeetModal","ModifyMeetModal","Map","joinMeetRequestAction","leaveMeetRequestAction","removeMeetRequestAction","useDispatch","useSelector","useEffect","Meet","singleCommunity","communityUser","me","dispatch","state","community","addMeetDone","joinMeetDone","joinMeetError","showCreateMeetModal","setShowCreateMeetModal","showModifyMeetModal","setShowModifyMeetModal","currentMeet","setCurrentMeet","currentModifyMeet","setCurrentModifyMeet","joinedMeetIndex","Meets","map","meet","id","joinedMeetList","filter","includes","notJoinedMeetList","onClickPlace","meetId","onClickMember","current","onClickCreateMeetButton","onClickDeleteMeetButton","confirm","communityId","onClickJoinMeetButton","currentMembers","totalMembers","alert","onClickLeaveMeetButton","onClickModifyMeetButton","overflow","length","i","title","date","fee","Users","members","place","user","MeetOwnerId","nickname","find"],"mappings":"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","sourcesContent":["import { PlusOutlined } from '@ant-design/icons';\r\nimport { ICommunity, IUser, IUserInfo } from 'interfaces/db';\r\nimport React, { memo, useCallback, useState } from 'react';\r\nimport { MakeMeetButton, MeetContainer, CardContainer } from './styles';\r\nimport CreateMeetModal from 'components/Modals/CreateMeetModal';\r\nimport ModifyMeetModal from 'components/Modals/ModifyMeetModal';\r\nimport Map from 'components/Map';\r\nimport {\r\n  joinMeetRequestAction,\r\n  leaveMeetRequestAction,\r\n  removeMeetRequestAction,\r\n} from 'actions/actionCommunity';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootStateInterface } from 'interfaces/RootState';\r\nimport { useEffect } from 'react';\r\n\r\ninterface MeeetProps {\r\n  singleCommunity: ICommunity;\r\n  me: IUser | null;\r\n  communityUser: IUserInfo | undefined;\r\n}\r\n\r\nfunction Meet({ singleCommunity, communityUser, me }: MeeetProps) {\r\n  const dispatch = useDispatch();\r\n  const { addMeetDone, joinMeetDone, joinMeetError } = useSelector(\r\n    (state: RootStateInterface) => state.community\r\n  );\r\n  const [showCreateMeetModal, setShowCreateMeetModal] = useState(false);\r\n  const [showModifyMeetModal, setShowModifyMeetModal] = useState(false);\r\n  const [currentMeet, setCurrentMeet] = useState<number[]>([]);\r\n  const [currentModifyMeet, setCurrentModifyMeet] = useState(-9999);\r\n  const joinedMeetIndex = me?.Meets.map(meet => meet.id);\r\n  const joinedMeetList = singleCommunity.Meets.filter(meet =>\r\n    joinedMeetIndex?.includes(meet.id)\r\n  );\r\n  const notJoinedMeetList = singleCommunity.Meets.filter(\r\n    meet => !joinedMeetIndex?.includes(meet.id)\r\n  );\r\n\r\n  const onClickPlace = useCallback(\r\n    (meetId: number) => () => {\r\n      if (currentMeet.includes(meetId)) {\r\n        return;\r\n      }\r\n      setCurrentMeet([...currentMeet, meetId]);\r\n    },\r\n    [currentMeet]\r\n  );\r\n\r\n  const onClickMember = useCallback(\r\n    (meetId: number) => () => {\r\n      setCurrentMeet([...currentMeet].filter(current => current !== meetId));\r\n    },\r\n    [currentMeet]\r\n  );\r\n\r\n  const onClickCreateMeetButton = useCallback(() => {\r\n    setShowCreateMeetModal(true);\r\n  }, []);\r\n\r\n  const onClickDeleteMeetButton = useCallback(\r\n    (meetId: number) => () => {\r\n      if (confirm('모임을 삭제하시겠습니까?')) {\r\n        return dispatch(\r\n          removeMeetRequestAction({ meetId, communityId: singleCommunity.id })\r\n        );\r\n      }\r\n    },\r\n    [singleCommunity]\r\n  );\r\n\r\n  const onClickJoinMeetButton = useCallback(\r\n    (meetId: number, currentMembers: number, totalMembers: number) => () => {\r\n      if (currentMembers >= totalMembers) {\r\n        return alert('인원 수가 초과되었습니다');\r\n      }\r\n      if (confirm('모임에 참가하시겠습니까?')) {\r\n        return dispatch(\r\n          joinMeetRequestAction({ meetId, communityId: singleCommunity.id })\r\n        );\r\n      }\r\n    },\r\n    [singleCommunity]\r\n  );\r\n\r\n  const onClickLeaveMeetButton = useCallback(\r\n    (meetId: number) => () => {\r\n      if (confirm('모임을 탈퇴하시겠습니까?')) {\r\n        return dispatch(\r\n          leaveMeetRequestAction({ communityId: singleCommunity.id, meetId })\r\n        );\r\n      }\r\n    },\r\n    [singleCommunity]\r\n  );\r\n\r\n  const onClickModifyMeetButton = useCallback(\r\n    (meetId: number) => () => {\r\n      setCurrentModifyMeet(meetId);\r\n      setShowModifyMeetModal(true);\r\n    },\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (addMeetDone) {\r\n      setShowCreateMeetModal(false);\r\n    }\r\n  }, [addMeetDone]);\r\n\r\n  useEffect(() => {\r\n    if (joinMeetDone) {\r\n      setShowModifyMeetModal(false);\r\n    }\r\n  }, [joinMeetDone]);\r\n\r\n  useEffect(() => {\r\n    if (joinMeetError) {\r\n      alert(joinMeetError);\r\n    }\r\n  }, [joinMeetError]);\r\n\r\n  return (\r\n    <MeetContainer>\r\n      {communityUser ? (\r\n        <>\r\n          <div style={{ overflow: 'auto' }}>\r\n            {joinedMeetList.length ? (\r\n              <div className=\"joined-meet\">\r\n                <div className=\"meet-name\">참가한 모임</div>\r\n                <div className=\"meet-card-grid\">\r\n                  {joinedMeetList.map((meet, i) => (\r\n                    <div key={meet.id}>\r\n                      <CardContainer number={i}>\r\n                        <div className=\"card-left\">\r\n                          <div className=\"card-header\">\r\n                            <div className=\"meet-title\">{meet.title}</div>\r\n                          </div>\r\n                          <div className=\"card-body\">\r\n                            <div className=\"meet-date\">{meet.date}시</div>\r\n                            <div className=\"meet-fee\">참가비: {meet.fee}원</div>\r\n                            <div\r\n                              className=\"meet-members\"\r\n                              onClick={onClickMember(meet.id)}\r\n                            >\r\n                              인원: {meet.Users.length} / {meet.members}명\r\n                            </div>\r\n                            <div className=\"meet-place\" onClick={onClickPlace(meet.id)}>\r\n                              장소: {meet.place}\r\n                            </div>\r\n                            <div className=\"meet-owner\">\r\n                              모임리더:{' '}\r\n                              {meet.Users.map(\r\n                                user => user.id === meet.MeetOwnerId && user.nickname\r\n                              )}\r\n                            </div>\r\n                            <div className=\"meet-button\">\r\n                              {meet.MeetOwnerId === me?.id ? (\r\n                                <div className=\"owner-buttons\">\r\n                                  <button onClick={onClickModifyMeetButton(meet.id)}>\r\n                                    수정\r\n                                  </button>\r\n                                  <button onClick={onClickDeleteMeetButton(meet.id)}>\r\n                                    삭제\r\n                                  </button>\r\n                                </div>\r\n                              ) : (\r\n                                <button onClick={onClickLeaveMeetButton(meet.id)}>\r\n                                  탈퇴\r\n                                </button>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"card-right\">\r\n                          {currentMeet.includes(meet.id) ? (\r\n                            <Map key={meet.id} address={meet.place} number={meet.id} />\r\n                          ) : (\r\n                            <div className=\"show-members\">\r\n                              <div>참가멤버</div>\r\n                              <div className=\"member-container\">\r\n                                {meet.Users.map(user => (\r\n                                  <p key={user.id}>{user.nickname}</p>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </CardContainer>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            <div className=\"new-meet\">\r\n              <div className=\"meet-name\">새로운 모임</div>\r\n              {notJoinedMeetList.length\r\n                ? notJoinedMeetList.map((meet, i) => (\r\n                    <div key={meet.id}>\r\n                      <CardContainer number={i}>\r\n                        <div className=\"card-left\">\r\n                          <div className=\"card-header\">\r\n                            <div className=\"meet-title\">{meet.title}</div>\r\n                          </div>\r\n                          <div className=\"card-body\">\r\n                            <div className=\"meet-date\">{meet.date}시</div>\r\n                            <div className=\"meet-fee\">참가비: {meet.fee}원</div>\r\n                            <div\r\n                              className=\"meet-members\"\r\n                              onClick={onClickMember(meet.id)}\r\n                            >\r\n                              인원: {meet.Users.length} / {meet.members}명\r\n                            </div>\r\n\r\n                            <div className=\"meet-place\" onClick={onClickPlace(meet.id)}>\r\n                              장소: {meet.place}\r\n                            </div>\r\n                            <div className=\"meet-owner\">\r\n                              모임리더:{' '}\r\n                              {meet.Users.map(\r\n                                user => user.id === meet.MeetOwnerId && user.nickname\r\n                              )}\r\n                            </div>\r\n                            <div className=\"meet-button\">\r\n                              {meet.Users.length < meet.members ? (\r\n                                <button\r\n                                  onClick={onClickJoinMeetButton(\r\n                                    meet.id,\r\n                                    meet.Users.length,\r\n                                    meet.members\r\n                                  )}\r\n                                >\r\n                                  참가하기\r\n                                </button>\r\n                              ) : (\r\n                                <button>인원제한</button>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"card-right\">\r\n                          {currentMeet.includes(meet.id) ? (\r\n                            <Map key={meet.id} address={meet.place} number={meet.id} />\r\n                          ) : (\r\n                            <div className=\"show-members\">\r\n                              <div>참가멤버</div>\r\n                              <div className=\"member-container\">\r\n                                {meet.Users.map(user => (\r\n                                  <p key={user.id}>{user.nickname}</p>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </CardContainer>\r\n                    </div>\r\n                  ))\r\n                : null}\r\n            </div>\r\n          </div>\r\n\r\n          <MakeMeetButton onClick={onClickCreateMeetButton}>\r\n            <PlusOutlined />\r\n          </MakeMeetButton>\r\n\r\n          {showCreateMeetModal && (\r\n            <CreateMeetModal\r\n              setShowCreateMeetModal={setShowCreateMeetModal}\r\n              communityId={singleCommunity.id}\r\n            />\r\n          )}\r\n\r\n          {showModifyMeetModal && (\r\n            <ModifyMeetModal\r\n              setShowModifyMeetModal={setShowModifyMeetModal}\r\n              communityId={singleCommunity.id}\r\n              meetInfo={joinedMeetList.find(meet => meet.id === currentModifyMeet)}\r\n            />\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div className=\"visitor-post\">커뮤니티 유저만 볼 수 있습니다</div>\r\n      )}\r\n    </MeetContainer>\r\n  );\r\n}\r\n\r\nexport default memo(Meet);\r\n"]},"metadata":{},"sourceType":"module"}