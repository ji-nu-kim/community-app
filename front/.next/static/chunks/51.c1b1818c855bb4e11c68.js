(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[51],{MNTT:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("ODXe"),a=n("7pp9"),i=n("Avh3"),o=n("2/Rp"),l=n("Vl3Y"),s=n("5rEg"),u=n("q1tI"),b=n("/MKj"),j=n("2BaD"),d=n("vOnD"),m=n("20a2"),f=Object(d.b)(o.a).withConfig({displayName:"PostForm__StyleButton",componentId:"sc-458sc1-0"})(["background:none;border:none;position:absolute;margin-left:-35px;color:#fff;margin-top:-5px;:hover{background:none;color:#039be5;}"]);function p(){var e=Object(m.useRouter)(),t=Object(b.c)((function(e){return e.post})),n=t.imagePaths,d=t.addPostDone,p=Object(b.b)(),O=Object(i.a)(""),h=Object(c.a)(O,3),g=h[0],x=h[1],y=h[2];Object(u.useEffect)((function(){d&&y("")}),[d]);var v=Object(u.useCallback)((function(){if(!g||!g.trim())return alert("\uac8c\uc2dc\uae00\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694");var t=new FormData;return n.forEach((function(e){return t.append("image",e)})),t.append("content",g),p(Object(a.b)({formData:t,communityId:Number(e.query.id)}))}),[g,n]),k=Object(u.useRef)(null),w=Object(u.useCallback)((function(){var e;null===(e=k.current)||void 0===e||e.click()}),[k.current]),C=Object(u.useCallback)((function(e){var t=new FormData;return[].forEach.call(e.target.files,(function(e){t.append("image",e)})),p(Object(a.j)(t))}),[]),D=Object(u.useCallback)((function(e){return function(){return p(Object(a.e)(e))}}),[]);return Object(r.jsxs)(l.a,{style:{height:"100%",display:"flex",justifyContent:"center",flexDirection:"column"},encType:"multipart/form-data",onFinish:v,children:[n&&Object(r.jsx)("div",{style:{display:"flex",marginBottom:"1rem"},children:n.map((function(e,t){return Object(r.jsxs)("div",{style:{marginRight:"1rem",background:"rgba(0,0,0,.7)"},children:[Object(r.jsx)("img",{src:e,style:{width:"100px"},alt:e}),Object(r.jsx)(f,{onClick:D(t),children:Object(r.jsx)(j.a,{})})]},e)}))}),Object(r.jsx)(s.a.TextArea,{value:g,onChange:x,maxLength:140,placeholder:"\uae00\uc744 \uc791\uc131\ud558\uc138\uc694",style:{color:"#fff",background:"rgba(0, 0, 0, 0.4)",border:"none",resize:"none",height:"70px"}}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:k,onChange:C}),Object(r.jsxs)("div",{style:{textAlign:"end",marginTop:"0.5rem"},children:[Object(r.jsx)(o.a,{onClick:w,children:"\uc5c5\ub85c\ub4dc"}),Object(r.jsx)(o.a,{style:{marginLeft:"0.5rem"},type:"primary",htmlType:"submit",children:"\uc62c\ub9ac\uae30"})]})]})]})}t.default=Object(u.memo)(p)}}]);