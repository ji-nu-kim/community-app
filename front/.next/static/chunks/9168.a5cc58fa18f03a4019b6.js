(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9168],{8188:function(e,t,n){"use strict";n.d(t,{LR:function(){return o},Q4:function(){return i},VR:function(){return a},kw:function(){return s},th:function(){return d},j6:function(){return c},sD:function(){return l},vN:function(){return m},HY:function(){return u},CM:function(){return f}});var r=n(8518),o=function(e){return{type:r.O.ADD_POST_REQUEST,data:e}},i=function(e){return{type:r.O.REMOVE_POST_REQUEST,data:e}},a=function(e){return{type:r.O.UPDATE_POST_REQUEST,data:e}},s=function(e){return{type:r.O.REPORT_REQUEST,data:e}},d=function(e){return{type:r.O.LOAD_POSTS_REQUEST,data:e}},c=function(e){return{type:r.O.ADD_COMMENT_REQUEST,data:e}},l=function(e){return{type:r.O.UPDATE_COMMENT_REQUEST,data:e}},m=function(e){return{type:r.O.REMOVE_COMMENT_REQUEST,data:e}},u=function(e){return{type:r.O.UPLOAD_IMAGES_REQUEST,data:e}},f=function(e){return{type:r.O.REMOVE_IMAGE,data:e}}},9168:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(5893),o=n(7294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},a=n(9408),s=function(e,t){return o.createElement(a.Z,Object.assign({},e,{ref:t,icon:i}))};s.displayName="MoreOutlined";var d=o.forwardRef(s),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},l=function(e,t){return o.createElement(a.Z,Object.assign({},e,{ref:t,icon:c}))};l.displayName="MessageOutlined";var m=o.forwardRef(l),u=n(8188),f=n(381),p=n.n(f),h=n(5152),g=n(4751),x=n(9163).ZP.div.withConfig({displayName:"styles__PostContainer",componentId:"glwfg8-0"})(["overflow:auto;height:100%;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background:rgba(0,0,0,0.4);.post-form-container{background:rgba(255,255,255,0.4);padding:1rem;margin-bottom:2rem;}.visitor-post{height:100%;display:flex;justify-content:center;align-items:center;}.header{position:relative;display:flex;justify-content:space-between;.header-left{display:flex;align-items:center;.left-profile-image{width:24px;height:24px;border-radius:50%;object-fit:cover;margin-right:8px;}.left-fake-image{width:24px;height:24px;border-radius:50%;margin-right:8px;background:rgba(0,0,0,0.5);text-align:center;}.left-nickname{font-weight:bold;}}.header-right{display:flex;align-items:center;position:relative;.right-day{font-size:0.75rem;}.right-buttons{margin-left:8px;font-size:16px;cursor:pointer;:hover{color:rgba(0,0,0,0.4);}}}}.post-body-container{position:relative;background:rgba(255,255,255,0.4);:not(:last-child){margin-bottom:1rem;}.post-body-header{border-bottom:1px solid rgba(0,0,0,0.2);padding:0.5rem;}.post-image{width:100%;object-fit:cover;}.post-text{padding:1rem 0.5rem;white-space:pre;}.post-comment-info{border-top:1px solid rgba(0,0,0,0.2);padding:0.5rem;}.post-comment-container{position:relative;margin:0.5rem 0;padding:0.5rem;background:linear-gradient( 120deg,rgba(69,104,220,0.7),rgba(176,106,179,0.7) );.comment-header{}.comment-text{margin-top:0.5rem;text-align:justify;white-space:pre;}}.post-comment-form-container{text-align:end;}}"]),b=(0,h.default)((function(){return n.e(3167).then(n.bind(n,3167))}),{loadableGenerated:{webpack:function(){return[3167]},modules:["..\\components\\CommunityBody\\Post\\index.tsx -> components/Modals/PostSettingModal"]}}),y=(0,h.default)((function(){return n.e(6864).then(n.bind(n,6864))}),{loadableGenerated:{webpack:function(){return[6864]},modules:["..\\components\\CommunityBody\\Post\\index.tsx -> components/Modals/PostEditModal"]}}),v=(0,h.default)((function(){return n.e(1037).then(n.bind(n,1037))}),{loadableGenerated:{webpack:function(){return[1037]},modules:["..\\components\\CommunityBody\\Post\\index.tsx -> components/Modals/CommentSettingModal"]}}),j=(0,h.default)((function(){return n.e(6547).then(n.bind(n,6547))}),{loadableGenerated:{webpack:function(){return[6547]},modules:["..\\components\\CommunityBody\\Post\\index.tsx -> components/Modals/CommentEditModal"]}}),E=(0,h.default)((function(){return Promise.all([n.e(8222),n.e(9870),n.e(5664),n.e(1639),n.e(4199)]).then(n.bind(n,4199))}),{loadableGenerated:{webpack:function(){return[4199]},modules:["..\\components\\CommunityBody\\Post\\index.tsx -> components/PostForm"]}}),C=(0,h.default)((function(){return Promise.all([n.e(8222),n.e(9870),n.e(5664),n.e(1639),n.e(1469)]).then(n.bind(n,58))}),{loadableGenerated:{webpack:function(){return[58]},modules:["..\\components\\CommunityBody\\Post\\index.tsx -> components/CommentForm"]}});function k(e){var t=e.singleCommunity,n=e.communityUser,i=(0,g.I0)(),a=(0,g.v9)((function(e){return e.post})),s=a.mainPosts,c=a.hasMorePost,l=a.loadPostsLoading,f=a.updateCommentDone,h=(0,o.useState)(!1),k=h[0],N=h[1],M=(0,o.useState)(!1),P=M[0],O=M[1],w=(0,o.useState)(0),S=w[0],U=w[1],_=(0,o.useState)(0),T=_[0],I=_[1],R=(0,o.useState)(!1),A=R[0],L=R[1],z=(0,o.useState)(0),D=z[0],Q=z[1],B=(0,o.useState)(0),G=B[0],F=B[1],V=(0,o.useState)(!1),H=V[0],Z=V[1],Y=(0,o.useState)(0),q=Y[0],J=Y[1],K=(0,o.useRef)(null),W=(0,o.useCallback)((function(e){return function(){U(e),O(!0)}}),[]),X=(0,o.useCallback)((function(e){return function(){Q(e),L(!0)}}),[]),$=(0,o.useCallback)((function(e){return function(){J(e),Z((function(e){return!e}))}}),[]),ee=(0,o.useCallback)((function(){(P||A)&&(O(!1),L(!1))}),[P,A]);return(0,o.useEffect)((function(){f&&N(!1)}),[f]),(0,o.useEffect)((function(){var e=K.current;if(e)return e.addEventListener("scroll",r),function(){return e.removeEventListener("scroll",r)};function r(e){if(n&&s.length&&e.target.scrollTop>=e.target.scrollHeight-e.target.offsetHeight-300&&c&&!l){var r=s[s.length-1].id;i((0,u.th)({communityId:t.id,postId:r}))}}}),[n,s,c,l,t,K.current]),(0,r.jsx)(x,{onClick:ee,ref:K,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"post-form-container",children:(0,r.jsx)(E,{})}),s.length?(0,r.jsx)(r.Fragment,{children:s.map((function(e){return(0,r.jsxs)("div",{className:"post-body-container",children:[k&&e.id===T&&(0,r.jsx)(y,{setEditMode:N,setCurrentModifyPost:I,currentPostText:e.content,postId:e.id,communityId:t.id}),(0,r.jsxs)("div",{className:"header post-body-header",children:[(0,r.jsxs)("div",{className:"header-left",children:[(0,r.jsx)("span",{children:e.User.profilePhoto?(0,r.jsx)("img",{className:"left-profile-image",src:e.User.profilePhoto,alt:"profile image"}):(0,r.jsx)("div",{className:"left-fake-image",children:e.User.nickname[0]})}),(0,r.jsx)("div",{className:"left-nickname",children:e.User.nickname})]}),(0,r.jsxs)("div",{className:"header-right",children:[(0,r.jsx)("div",{className:"right-day",children:p()(e.createdAt).locale("ko").format("LLL")}),(0,r.jsx)("div",{className:"right-buttons",onClick:W(e.id),children:(0,r.jsx)(d,{})}),P&&e.id===S&&(0,r.jsx)(b,{setCurrentModifyPost:I,setEditMode:N,postId:e.id,communityId:t.id,postOwnerId:e.User.id,communityUserId:n.id,content:e.content})]})]}),e.Images.length?(0,r.jsx)("img",{src:e.Images[0].src.replace(/\/resize\//,"/original/"),alt:"image",className:"post-image"}):null,(0,r.jsx)("div",{className:"post-text",children:e.content}),(0,r.jsxs)("div",{className:"post-comment-info",children:[(0,r.jsxs)("div",{onClick:$(e.id),style:{cursor:"pointer"},children:[(0,r.jsx)("span",{style:{marginRight:"4px"},children:(0,r.jsx)(m,{})}),e.Comments.length?"\ub313\uae00 ".concat(e.Comments.length,"\uac1c \ubaa8\ub450\ubcf4\uae30"):"\ub313\uae00 \uc791\uc131\ud558\uae30"]}),H&&q===e.id&&(0,r.jsxs)(r.Fragment,{children:[e.Comments&&e.Comments.map((function(t){return(0,r.jsxs)("div",{className:"post-comment-container",children:[k&&t.id===G&&(0,r.jsx)(j,{setEditMode:N,setCurrentModifyComment:F,currentCommentText:t.content,postId:e.id,commentId:t.id}),(0,r.jsxs)("div",{className:"header comment-header",children:[(0,r.jsxs)("div",{className:"header-left",children:[(0,r.jsx)("span",{children:t.User.profilePhoto?(0,r.jsx)("img",{className:"left-profile-image",src:t.User.profilePhoto,alt:"profile image"}):(0,r.jsx)("div",{className:"left-fake-image",children:t.User.nickname[0]})}),(0,r.jsx)("div",{className:"left-nickname",children:t.User.nickname})]}),(0,r.jsxs)("div",{className:"header-right",children:[(0,r.jsx)("div",{className:"right-day",children:p()(t.createdAt).locale("ko").format("LLL")}),(0,r.jsx)("div",{className:"right-buttons",onClick:X(t.id),children:(0,r.jsx)(d,{})})]}),A&&t.id===D&&(0,r.jsx)(v,{setCurrentModifyComment:F,setEditMode:N,postId:e.id,commentId:t.id,commentOwnerId:t.User.id,communityUserId:n.id,content:t.content})]}),(0,r.jsx)("div",{className:"comment-text",children:t.content})]},t.id)})),(0,r.jsx)("div",{className:"post-comment-form-container",children:(0,r.jsx)(C,{postId:e.id})})]})]})]},e.id)}))}):null]}):(0,r.jsx)("div",{className:"visitor-post",children:"\ucee4\ubba4\ub2c8\ud2f0\uc720\uc800\ub9cc \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4"})})}var N=(0,o.memo)(k)}}]);