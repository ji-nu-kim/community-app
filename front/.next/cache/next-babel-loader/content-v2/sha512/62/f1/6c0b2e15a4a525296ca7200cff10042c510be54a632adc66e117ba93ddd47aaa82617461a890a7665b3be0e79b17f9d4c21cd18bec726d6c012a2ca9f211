{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { memo, useCallback, useRef } from 'react';\nimport { CameraOutlined } from '@ant-design/icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { removeImage, uploadImageRequestAction } from 'actions/actionUser';\nimport { ProfileImgContainer } from './styles';\nimport { Button } from 'antd';\nimport { useRouter } from 'next/router';\nimport { removeCommunityImage, uploadCommunityImageRequestAction } from 'actions/actionCommunity';\n\nfunction ImageInsert({\n  imagePath,\n  profilePhoto\n}) {\n  const router = useRouter();\n  const dispatch = useDispatch();\n  const imageInputRef = useRef(null);\n  const {\n    uploadImageDone\n  } = useSelector(state => state.user);\n  const {\n    uploadCommunityImageDone\n  } = useSelector(state => state.community);\n  const onClickImageUpload = useCallback(() => {\n    const route = router.route.split('/')[1];\n\n    if (route === 'profile' && !uploadImageDone) {\n      var _imageInputRef$curren;\n\n      (_imageInputRef$curren = imageInputRef.current) === null || _imageInputRef$curren === void 0 ? void 0 : _imageInputRef$curren.click();\n    } else if (route === 'community' && !uploadCommunityImageDone) {\n      var _imageInputRef$curren2;\n\n      (_imageInputRef$curren2 = imageInputRef.current) === null || _imageInputRef$curren2 === void 0 ? void 0 : _imageInputRef$curren2.click();\n    }\n  }, [imageInputRef.current, uploadImageDone, uploadCommunityImageDone]);\n  const onChangeImages = useCallback(e => {\n    var _e$target$files;\n\n    if ((_e$target$files = e.target.files) !== null && _e$target$files !== void 0 && _e$target$files.length) {\n      const route = router.route.split('/')[1];\n      const imageFormData = new FormData();\n      [].forEach.call(e.target.files, f => {\n        imageFormData.append('image', f);\n      });\n\n      if (route === 'profile') {\n        return dispatch(uploadImageRequestAction(imageFormData));\n      } else if (route === 'community') {\n        return dispatch(uploadCommunityImageRequestAction(imageFormData));\n      }\n    }\n  }, []);\n  const onRemoveImage = useCallback(() => {\n    const route = router.route.split('/')[1];\n\n    if (imagePath.length) {\n      if (route === 'profile') {\n        return dispatch(removeImage());\n      } else if (route === 'community') {\n        return dispatch(removeCommunityImage());\n      }\n    }\n  }, [imagePath]);\n  return /*#__PURE__*/_jsx(ProfileImgContainer, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"input\", {\n        type: \"file\",\n        name: \"image\",\n        hidden: true,\n        ref: imageInputRef,\n        onChange: onChangeImages\n      }), /*#__PURE__*/_jsx(Button, {\n        onClick: onClickImageUpload,\n        shape: \"circle\",\n        className: \"img-input-btn\",\n        children: imagePath.length ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            width: \"100\",\n            height: \"100\",\n            src: imagePath[0].replace(/\\/resize\\//, '/original/'),\n            alt: \"profileimage\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            onClick: onRemoveImage,\n            className: \"img-delete-btn\",\n            children: \"\\uC9C0\\uC6B0\\uAE30\"\n          })]\n        }) : profilePhoto ? /*#__PURE__*/_jsx(\"img\", {\n          width: \"100\",\n          height: \"100\",\n          src: profilePhoto,\n          alt: \"profileimage\"\n        }) : /*#__PURE__*/_jsx(CameraOutlined, {\n          className: \"img-input-icon\"\n        })\n      })]\n    })\n  });\n}\n\nexport default /*#__PURE__*/memo(ImageInsert);","map":{"version":3,"sources":["C:/Users/wlsdn/Desktop/next/community/front/components/ImageInsert/index.tsx"],"names":["React","memo","useCallback","useRef","CameraOutlined","useDispatch","useSelector","removeImage","uploadImageRequestAction","ProfileImgContainer","Button","useRouter","removeCommunityImage","uploadCommunityImageRequestAction","ImageInsert","imagePath","profilePhoto","router","dispatch","imageInputRef","uploadImageDone","state","user","uploadCommunityImageDone","community","onClickImageUpload","route","split","current","click","onChangeImages","e","target","files","length","imageFormData","FormData","forEach","call","f","append","onRemoveImage","replace"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, memo, useCallback, useRef } from 'react';\nimport { CameraOutlined } from '@ant-design/icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootStateInterface } from 'interfaces/RootState';\nimport { removeImage, uploadImageRequestAction } from 'actions/actionUser';\nimport { ProfileImgContainer } from './styles';\nimport { Button } from 'antd';\nimport { useRouter } from 'next/router';\nimport {\n  removeCommunityImage,\n  uploadCommunityImageRequestAction,\n} from 'actions/actionCommunity';\n\ninterface ImageInsertProps {\n  imagePath: string[];\n  profilePhoto: string | undefined;\n}\n\nfunction ImageInsert({ imagePath, profilePhoto }: ImageInsertProps) {\n  const router = useRouter();\n  const dispatch = useDispatch();\n  const imageInputRef = useRef<HTMLInputElement>(null);\n  const { uploadImageDone } = useSelector((state: RootStateInterface) => state.user);\n  const { uploadCommunityImageDone } = useSelector(\n    (state: RootStateInterface) => state.community\n  );\n\n  const onClickImageUpload = useCallback(() => {\n    const route = router.route.split('/')[1];\n    if (route === 'profile' && !uploadImageDone) {\n      imageInputRef.current?.click();\n    } else if (route === 'community' && !uploadCommunityImageDone) {\n      imageInputRef.current?.click();\n    }\n  }, [imageInputRef.current, uploadImageDone, uploadCommunityImageDone]);\n\n  const onChangeImages = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files?.length) {\n      const route = router.route.split('/')[1];\n      const imageFormData = new FormData();\n      [].forEach.call(e.target.files, f => {\n        imageFormData.append('image', f);\n      });\n      if (route === 'profile') {\n        return dispatch(uploadImageRequestAction(imageFormData));\n      } else if (route === 'community') {\n        return dispatch(uploadCommunityImageRequestAction(imageFormData));\n      }\n    }\n  }, []);\n\n  const onRemoveImage = useCallback(() => {\n    const route = router.route.split('/')[1];\n    if (imagePath.length) {\n      if (route === 'profile') {\n        return dispatch(removeImage());\n      } else if (route === 'community') {\n        return dispatch(removeCommunityImage());\n      }\n    }\n  }, [imagePath]);\n\n  return (\n    <ProfileImgContainer>\n      <div>\n        <input\n          type=\"file\"\n          name=\"image\"\n          hidden\n          ref={imageInputRef}\n          onChange={onChangeImages}\n        />\n        <Button onClick={onClickImageUpload} shape=\"circle\" className=\"img-input-btn\">\n          {imagePath.length ? (\n            <>\n              <img\n                width=\"100\"\n                height=\"100\"\n                src={imagePath[0].replace(/\\/resize\\//, '/original/')}\n                alt=\"profileimage\"\n              />\n              <div onClick={onRemoveImage} className=\"img-delete-btn\">\n                지우기\n              </div>\n            </>\n          ) : profilePhoto ? (\n            <img width=\"100\" height=\"100\" src={profilePhoto} alt=\"profileimage\" />\n          ) : (\n            <CameraOutlined className=\"img-input-icon\" />\n          )}\n        </Button>\n      </div>\n    </ProfileImgContainer>\n  );\n}\n\nexport default memo(ImageInsert);\n"]},"metadata":{},"sourceType":"module"}